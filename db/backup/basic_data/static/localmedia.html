<!--
// Copyright 2013-2014 Digital Codex LLC
// You may use this code for your own education.  If you use it
// largely intact, or develop something from it, don't claim that
// your code came first.  You are using this code completely at
// your own risk.  If you rely on it to work in any particular
// way, you're an idiot and we won't be held responsible.
-->

<html>
<head>
  <meta http-equiv="Content-Type"
        content="text/html; charset=UTF-8" />
  <style>
    video {
      width:  320px;
      height:  240px;
      border:  1px solid black;
    }
    div {
      display:  inline-block;
    }
  </style>
</head>
<body>

<!-- load polyfill, local copy first for local testing -->
<script src="extra/adapter.js" type="text/javascript"></script>
<script
  src="http://apprtc.webrtc.org/js/adapter.js"
  type="text/javascript"></script>

<script>
var myVideoStream, myVideo;

////////////////////////////
// This is the main routine.
////////////////////////////

// This kicks off acquisition of local media.
window.onload = function () {

  myVideo = document.getElementById("myVideo");
  
  getMedia();
};


/////////////////////////////
// This next section is for getting local media
/////////////////////////////

function getMedia() {
  getUserMedia({"audio":true, "video":true},
               gotUserMedia, didntGetUserMedia);
}

function gotUserMedia(stream) {
  myVideoStream = stream;

  // display my local video to me
  attachMediaStream(myVideo, myVideoStream);
}

function didntGetUserMedia() {
  console.log("couldn't get video");
}

</script>

<div id="setup">
  <p>WebRTC Book Demo (local media only)</p>
</div>

<br/>

<div style="width:30%;vertical-align:top">
  <div>
    <video id="myVideo" autoplay="autoplay" controls
           muted="true"/>
  </div>
</div>

</body>
</html>
